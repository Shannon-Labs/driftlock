# Driftlock Environment Configuration
# Copy this file to .env and fill in your values
# DO NOT commit .env to git!

# ============================================
# DATABASE
# ============================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/driftlock

# ============================================
# FIREBASE AUTHENTICATION
# ============================================
FIREBASE_PROJECT_ID=driftlock
# For local development, you can use the emulator:
# FIREBASE_AUTH_EMULATOR_HOST=localhost:9099

# Service account (for server-side auth verification)
# Get from: Firebase Console > Project Settings > Service Accounts > Generate new private key
# FIREBASE_PRIVATE_KEY_ID=your_key_id
# FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
# FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxx@driftlock.iam.gserviceaccount.com

# ============================================
# STRIPE BILLING
# ============================================
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_...

# Get from: https://dashboard.stripe.com/webhooks (after creating webhook)
STRIPE_WEBHOOK_SECRET=whsec_...

# Get from: https://dashboard.stripe.com/products (create products first)
# Tier pricing (canonical names):
#   Pro:        $99/mo  (500K events, 20 streams)
#   Team:       $199/mo (5M events, 100 streams)
#   Enterprise: Custom  (Unlimited, EU data residency)
STRIPE_PRICE_ID_PRO=price_...      # Pro tier ($99/mo)
STRIPE_PRICE_ID_TEAM=price_...     # Team tier ($199/mo)

# ============================================
# EMAIL (SendGrid)
# ============================================
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG....

# Sender configuration
SENDGRID_FROM_EMAIL=noreply@driftlock.io
SENDGRID_FROM_NAME=Driftlock

# ============================================
# AI PROVIDERS
# ============================================
# Primary AI provider: zai (Z.AI) or vertex (Google Vertex AI)
AI_PROVIDER=zai

# Z.AI API key (if using zai provider)
AI_API_KEY=your_zai_api_key

# Anthropic API key (for soak tests and direct Claude usage)
ANTHROPIC_API_KEY=your_anthropic_api_key

# Google Cloud project (if using vertex provider)
# GCP_PROJECT_ID=your-gcp-project

# ============================================
# OBSERVABILITY
# ============================================
# Sentry error tracking
# Get from: https://sentry.io/settings/projects/YOUR_PROJECT/keys/
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# OpenTelemetry (for tracing)
# Local: use Jaeger at localhost:4317
# Production: Cloud Trace endpoint
OTEL_EXPORTER_OTLP_ENDPOINT=localhost:4317
OTEL_SERVICE_NAME=driftlock-api

# Log level: debug, info, warn, error
LOG_LEVEL=info

# ============================================
# APPLICATION
# ============================================
# Server configuration
PORT=8080
HOST=0.0.0.0

# Environment: development, staging, production
ENV=development

# Enable development mode features (mock emails, relaxed validation)
DRIFTLOCK_DEV_MODE=true

# Base URL for email links
BASE_URL=http://localhost:5173

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================
# OPTIONAL: SOAK TESTS
# ============================================
# URL for the Anomaly Analysis Function
ANOMALY_FUNCTION_URL=https://us-central1-driftlock.cloudfunctions.net/analyzeAnomalies

# Wikimedia stream for testing
# WIKIMEDIA_STREAM_URL=https://stream.wikimedia.org/v2/stream/recentchange
