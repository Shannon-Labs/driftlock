# DriftLock Environment Variables
# Copy this file to .env and customize for your deployment

# Server Configuration
SERVER_HOST=0.0.0.0
PORT=8080
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s

# Database Configuration (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=driftlock
DB_USER=postgres
DB_PASSWORD=your_secure_password_here
DB_MAX_CONNECTIONS=100
DB_SSL_MODE=prefer

# CBAD Configuration (Anomaly Detection)
CBAD_NCD_THRESHOLD=0.3
CBAD_P_VALUE_THRESHOLD=0.05
CBAD_BASELINE_SIZE=100
CBAD_WINDOW_SIZE=50
CBAD_HOP_SIZE=10

# Authentication Configuration
# API key for dashboard access (also mirrored to DRIFTLOCK_DEV_API_KEY when unset)
DEFAULT_API_KEY=your_api_key_here_for_dashboard_access
DEFAULT_ORG_ID=default

# Observability Configuration
PROMETHEUS_PORT=9090
LOG_LEVEL=info
TRACE_SAMPLING=0.1

# Kafka Configuration (Optional - for streaming ingestion)
KAFKA_ENABLED=false
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=driftlock-api
KAFKA_GROUP_ID=driftlock-api
KAFKA_EVENTS_TOPIC=otlp-events
KAFKA_ANOMALIES_TOPIC=anomaly-events
KAFKA_TLS_ENABLED=false

# Redis Configuration (Optional - for caching)
REDIS_ENABLED=false
REDIS_ADDR=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_PREFIX=driftlock

# Storage Configuration (Optional - for tiered storage)
TIERED_STORAGE_ENABLED=false
HOT_RETENTION_DAYS=7
WARM_RETENTION_DAYS=83
ARCHIVE_INTERVAL=24h
COMPRESSION_ENABLED=true
COMPRESSION_ALGORITHM=zstd
COMPRESSION_LEVEL=3
COMPRESSION_MIN_SIZE=1024

# Tenant Configuration (Optional - for multi-tenancy)
TENANT_ENABLED=false
TENANT_ISOLATION_MODE=schema
TENANT_DEFAULT_TENANT=default
TENANT_MAX_ANOMALIES_PER_DAY=1000
TENANT_MAX_EVENTS_PER_DAY=10000
TENANT_MAX_STORAGE_GB=100
TENANT_MAX_API_REQUESTS_PER_MIN=100

# OpenTelemetry Configuration
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=driftlock-api
OTEL_ENV=development

# Development API Key for Dashboard Access
# Leave blank to reuse DEFAULT_API_KEY or set a dedicated dev-only key
DRIFTLOCK_DEV_API_KEY=
