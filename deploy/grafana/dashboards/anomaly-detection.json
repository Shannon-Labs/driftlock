{
  "dashboard": {
    "title": "Driftlock - Anomaly Detection",
    "tags": ["driftlock", "anomaly-detection", "cbad"],
    "timezone": "browser",
    "schemaVersion": 16,
    "version": 1,
    "refresh": "10s",
    "panels": [
      {
        "id": 1,
        "title": "Anomalies Detected (Total)",
        "type": "stat",
        "targets": [
          {
            "expr": "sum(driftlock_anomalies_detected_total)",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 6,
          "x": 0,
          "y": 0
        }
      },
      {
        "id": 2,
        "title": "Anomaly Detection Rate",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(driftlock_anomalies_detected_total[5m])",
            "legendFormat": "{{stream_type}}",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 18,
          "x": 6,
          "y": 0
        },
        "yaxes": [
          {
            "format": "anomalies/s",
            "label": "Detection Rate"
          }
        ]
      },
      {
        "id": 3,
        "title": "Anomalies by Stream Type",
        "type": "piechart",
        "targets": [
          {
            "expr": "driftlock_anomalies_detected_total",
            "legendFormat": "{{stream_type}}",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 0,
          "y": 8
        }
      },
      {
        "id": 4,
        "title": "Anomalies by Severity",
        "type": "piechart",
        "targets": [
          {
            "expr": "driftlock_anomalies_detected_total",
            "legendFormat": "{{severity}}",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 8,
          "y": 8
        }
      },
      {
        "id": 5,
        "title": "NCD Score Distribution",
        "type": "heatmap",
        "targets": [
          {
            "expr": "driftlock_ncd_score_bucket",
            "format": "heatmap",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 16,
          "y": 8
        }
      },
      {
        "id": 6,
        "title": "P-Value Distribution",
        "type": "histogram",
        "targets": [
          {
            "expr": "driftlock_p_value_bucket",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 16
        }
      },
      {
        "id": 7,
        "title": "Compression Ratio Timeline",
        "type": "graph",
        "targets": [
          {
            "expr": "driftlock_compression_ratio",
            "legendFormat": "{{stream_type}} - {{window_type}}",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 16
        },
        "yaxes": [
          {
            "format": "none",
            "label": "Compression Ratio"
          }
        ]
      },
      {
        "id": 8,
        "title": "Events Processed",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(driftlock_events_processed_total[5m])",
            "legendFormat": "{{stream_type}}",
            "refId": "A"
          }
        ],
        "gridPos": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 24
        },
        "yaxes": [
          {
            "format": "events/s",
            "label": "Processing Rate"
          }
        ]
      }
    ]
  }
}
